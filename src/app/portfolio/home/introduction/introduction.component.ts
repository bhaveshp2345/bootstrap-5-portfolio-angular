import {
  Component,
  OnInit,
  ViewChild,
  Renderer2,
  ElementRef,
  AfterViewInit,
} from '@angular/core';

@Component({
  selector: 'app-introduction',
  templateUrl: './introduction.component.html',
  styleUrls: ['./introduction.component.scss'],
})
export class IntroductionComponent implements OnInit, AfterViewInit {
  @ViewChild('switchParent', { static: true }) public switchParent: any;
  @ViewChild('gitHubBadge', { static: true }) public gitHubBadge: any;
  //#region owlSvg
  owlSvg = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="display: block; height: 100%; font-size: 25px; text-align: end; margin-left: 20px; color: rgb(53, 50, 57); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36" class="iconify" data-icon="twemoji:owl" data-inline="false"><path fill="#662113" d="M7.317 11c-5.723 9.083.958 18 .958 18s2.874-.442 6.875-5.2c4-4.758-7.833-12.8-7.833-12.8zm21.342 0c5.723 9.083-.958 18-.958 18s-2.874-.442-6.875-5.2C16.825 19.042 28.659 11 28.659 11z"></path><path fill="#FFAC33" d="M15.203 31.557a1.22 1.22 0 0 0-.531-.496c-2.032-2.172-.589-4.717-.589-4.717c0-.703 1.271-2.544 0-2.544l-1.272 1.272c-1.272 1.271-1.272 5.089-1.272 5.089H8.995a1.27 1.27 0 1 0 0 2.543h1.408l-.282.153a1.274 1.274 0 0 0 1.21 2.24l3.357-1.816a1.274 1.274 0 0 0 .515-1.724zm5.596 0c.123-.229.317-.384.53-.496c2.033-2.172.589-4.717.589-4.717c0-.703-1.271-2.544 0-2.544l1.272 1.272c1.273 1.271 1.273 5.089 1.273 5.089h2.544a1.27 1.27 0 0 1 1.271 1.272a1.27 1.27 0 0 1-1.271 1.271h-1.408l.281.153a1.273 1.273 0 1 1-1.211 2.24l-3.356-1.816a1.272 1.272 0 0 1-.514-1.724z"></path><path fill="#662113" d="M28.278 11.292c2.891-6.092 0-10.542 0-10.542s-5.781.959-6.744 2.875c-1.219 2.424 6.744 7.667 6.744 7.667z"></path><path fill="#662113" d="M29.562 12.738c0 10.297-3.152 20.595-11.562 20.595c-8.409 0-11.563-10.298-11.563-20.595C6.437 2.44 11.614 2.083 18 2.083c6.387 0 11.562.357 11.562 10.655z"></path><path fill="#C1694F" d="M27.666 17.738c0 10.297-7.774 14.595-9.666 14.595s-9.666-4.298-9.666-14.595c0-10.298 19.332-10.298 19.332 0z"></path><path fill="#662113" d="M7.722 11.292C4.831 5.2 7.722.75 7.722.75s5.782.959 6.746 2.875c1.218 2.424-6.746 7.667-6.746 7.667z"></path><path fill="#C1694F" d="M14.929 4.373C10.702 2.789 7.722.75 7.722.75s-2.076 3.221-.928 7.926c.446 2.137 1.94 4.195 3.904 4.662c2.637.627 7.302-.049 7.302-3.963c0-2.695-1.074-4.252-3.071-5.002zm6.142 0C25.298 2.789 28.277.75 28.277.75s2.076 3.221.928 7.926c-.445 2.137-1.939 4.195-3.902 4.662c-2.638.627-7.303-.049-7.303-3.963c0-2.695 1.074-4.252 3.071-5.002z"></path><path fill="#FFD983" d="M16.083 8.417a3.833 3.833 0 1 1-7.666 0a3.833 3.833 0 0 1 7.666 0zm11.5 0a3.833 3.833 0 1 1-7.666 0a3.833 3.833 0 0 1 7.666 0z"></path><path fill="#292F33" d="M14.167 8.417a1.917 1.917 0 1 1-3.833 0a1.917 1.917 0 0 1 3.833 0zm11.5 0a1.917 1.917 0 1 1-3.833 0a1.917 1.917 0 0 1 3.833 0z"></path><path fill="#FFCC4D" d="M20.875 12.729c0 2.382-2.875 3.354-2.875 3.354s-2.875-.973-2.875-3.354S18 9.375 18 9.375s2.875.972 2.875 3.354z"></path><path fill="#F4900C" d="M20.875 12.729c0 2.382-2.875 3.354-2.875 3.354s-2.875-.973-2.875-3.354C16.323 13.927 18 14.167 18 14.167s1.677-.24 2.875-1.438z"></path></svg>`;
  //#endregion

  //#region sunsvg
  sunSvg = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="display: block; height: 100%; font-size: 25px; text-align: end; margin-left: 10px; color: rgb(53, 50, 57); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 128 128" class="iconify" data-icon="noto-v1:sun-with-face" data-inline="false"><g fill="#fcc21b"><path d="m108.43 76.11l18.15-6.84l-16.59-10.07l14.45-12.94l-19.1-3.39l8.81-17.29l-19.04 3.74l1.97-19.3L80.69 20.4L75.55 1.7L64 17.28L52.45 1.69l-5.13 18.7l-16.4-10.36l1.97 19.3l-19.04-3.74l8.8 17.29l-19.1 3.39L18.01 59.2L1.42 69.27l18.15 6.84L7.75 91.48l19.39-.18l-5.48 18.61l18.03-7.17l1.61 19.33l14.21-13.2L64 126.31l8.49-17.44l14.22 13.2l1.61-19.33l18.02 7.17l-5.48-18.61l19.4.18l-11.83-15.37zm-44.42 30.55c-23.56 0-42.66-19.1-42.66-42.66c0-23.56 19.1-42.66 42.66-42.66c23.55 0 42.65 19.1 42.65 42.66c0 23.56-19.1 42.65-42.65 42.66z"></path><path d="M64 127.35c-.4 0-.76-.23-.94-.59l-7.87-16.18l-13.18 12.24c-.29.28-.71.36-1.08.21c-.38-.14-.63-.49-.67-.89l-1.49-17.93l-16.72 6.65c-.37.15-.79.07-1.09-.2c-.3-.27-.41-.68-.3-1.07l5.08-17.25l-17.98.19h-.01c-.4 0-.76-.22-.94-.58c-.18-.36-.14-.79.11-1.1l10.96-14.26l-16.82-6.35c-.37-.14-.64-.48-.67-.88c-.04-.4.16-.78.5-.99l15.38-9.33l-13.41-12c-.29-.27-.42-.68-.31-1.07c.11-.39.43-.67.82-.74l17.71-3.14l-8.16-16.03c-.19-.36-.14-.78.1-1.1c.24-.32.65-.48 1.03-.39l17.66 3.47l-1.83-17.9c-.04-.4.16-.78.49-.99c.35-.21.78-.21 1.11 0l15.21 9.61l4.76-17.34c.1-.38.43-.68.82-.75c.41-.08.79.08 1.03.4L64 15.52L74.71 1.07c.24-.32.65-.48 1.03-.4c.39.07.71.36.82.75l4.76 17.34l15.21-9.61c.34-.22.77-.21 1.11 0c.34.21.53.6.49.99l-1.83 17.9l17.65-3.47c.39-.09.79.08 1.03.39c.24.32.28.75.1 1.1l-8.16 16.03l17.71 3.14c.39.07.71.36.83.74c.11.38-.01.8-.31 1.07l-13.41 12l15.39 9.33c.34.21.54.59.5.99c-.03.4-.29.74-.67.88l-16.83 6.34l10.97 14.26c.24.32.29.75.1 1.1c-.17.35-.54.58-.93.58h-.01l-17.99-.17l5 16.96c.11.17.18.37.18.59c0 .58-.47 1.05-1.04 1.05h-.05c-.13 0-.26-.03-.39-.07l-16.71-6.65l-1.49 17.93c-.03.4-.29.74-.67.89c-.37.15-.79.07-1.08-.21L72.83 110.6l-7.87 16.18c-.2.34-.56.57-.96.57zm-8.49-19.53c.07 0 .13.01.19.02c.33.06.61.27.75.57L64 123.92l7.55-15.51c.14-.3.42-.51.75-.57c.31-.06.66.04.9.26l12.65 11.74l1.43-17.19a1.044 1.044 0 0 1 1.43-.88l16.03 6.38l-4.88-16.55c-.09-.32-.03-.66.17-.93c.19-.26.5-.41.83-.41h.01l17.25.16l-10.52-13.68c-.21-.26-.27-.6-.18-.92c.09-.32.33-.58.64-.69l16.14-6.08l-14.75-8.95c-.28-.17-.47-.47-.5-.8c-.02-.33.1-.65.35-.88l12.85-11.5l-16.98-3.02c-.33-.06-.6-.27-.75-.56c-.15-.3-.15-.65 0-.94l7.84-15.38l-16.93 3.33c-.32.07-.66-.03-.9-.25c-.25-.22-.37-.55-.34-.88l1.75-17.16l-14.58 9.22c-.29.17-.64.21-.94.09a1.05 1.05 0 0 1-.63-.7L75.11 4.04L64.84 17.9c-.4.53-1.28.53-1.68 0L52.89 4.04l-4.56 16.63a1.053 1.053 0 0 1-1.57.61l-14.58-9.22l1.75 17.16c.03.33-.09.65-.34.88c-.24.22-.59.32-.9.25l-16.93-3.33l7.82 15.38a1.048 1.048 0 0 1-.75 1.5L5.85 46.92l12.85 11.5a1.055 1.055 0 0 1-.16 1.68L3.8 69.05l16.14 6.08c.31.12.55.37.64.69c.09.32.02.66-.17.92L9.89 90.42l17.24-.16h.01c.33 0 .64.15.83.41c.2.27.26.61.17.93l-4.87 16.54l16.03-6.38c.31-.12.66-.09.94.08c.29.17.46.47.49.8l1.43 17.19L54.8 108.1c.2-.18.45-.28.71-.28zm8.5-.12c-24.1 0-43.7-19.61-43.71-43.7c0-24.1 19.61-43.7 43.71-43.7c24.09 0 43.7 19.6 43.7 43.7c0 24.09-19.61 43.7-43.7 43.7zm0-85.31C41.07 22.39 22.4 41.06 22.39 64c0 22.94 18.67 41.61 41.62 41.61c22.94 0 41.6-18.67 41.6-41.61c0-22.94-18.66-41.61-41.6-41.61z"></path></g><circle cx="64" cy="64" r="37.34" fill="#fcc21b"></circle><path fill="#2f2f2f" d="M64.92 85.81c-2.3.02-4.64-.48-6.54-1.43c-.95-.47-1.93-1.11-2.69-1.85c-.76-.75-1.5-2.07-.6-2.98c.73-.73 1.79 0 2.49.38c1.98 1.08 4.24 1.87 6.53 1.97c2.54.11 4.6-.66 6.79-1.81c.62-.33 1.86-1.13 2.59-.69c1.82 1.11-.34 3.1-1.28 3.89c-2.02 1.71-4.62 2.49-7.29 2.52zm-.83-9.3c4.16 0 6.44-3.45 4.89-4.22c-1.56-.77-1.71 2.02-4.89 2.02c-3.18 0-3.33-2.79-4.89-2.02c-1.55.77.74 4.22 4.89 4.22z"></path><g fill="#2f2f2f"><path d="M51.45 63.83c0 3.12-2.31 5.66-5.14 5.66c-2.82 0-5.13-2.54-5.13-5.66c0-3.13 2.3-5.66 5.13-5.66c2.83-.01 5.14 2.53 5.14 5.66z"></path><ellipse cx="81.69" cy="63.82" rx="5.13" ry="5.66"></ellipse></g></svg>`;
  //#endregion

  //#region Giithub svg
  githubSvg = `<svg
  width="90"
  height="90"
  viewBox="0 0 250 250"
  style="
    fill: #151513;
    color: #fff;
    position: absolute;
    top: 0;
    border: 0;
    left: 0;
    transform: scale(-1, 1);
    z-index: 9999;
  "
  aria-hidden="true"
>
  <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
  <path
    d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
    fill="currentColor"
    style="transform-origin: 130px 106px"
    class="octo-arm"
  ></path>
  <path
    d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
    fill="currentColor"
    class="octo-body"
  ></path>
</svg>`;
  //#endregion

  switchStatus = false;
  constructor(private renderer: Renderer2, private el: ElementRef) {}

  ngOnInit(): void {}

  ngAfterViewInit(): void {
    this.prepareGitSvg();
    this.toggleSwitch();
  }

  prepareGitSvg() {
    setTimeout(() => {
      const newEl = this.renderer.createElement('div');
      newEl.innerHTML = `${this.githubSvg}`;
      this.renderer.appendChild(this.gitHubBadge.nativeElement, newEl);
    }, 0);
  }

  toggleSwitch() {
    setTimeout(() => {
      this.removeEl();
      this.addEl();
    }, 0);
  }

  addEl() {
    const newEl = this.renderer.createElement('label');
    this.renderer.setAttribute(newEl, 'for', 'mySwitch');
    if (!this.switchStatus) {
      this.renderer.addClass(newEl, 'owlSvgClass');
      newEl.innerHTML = `${this.owlSvg}`;
    } else {
      this.renderer.addClass(newEl, 'sunSvgClass');
      newEl.innerHTML = `${this.sunSvg}`;
    }
    this.renderer.appendChild(this.switchParent.nativeElement, newEl);
  }

  removeEl() {
    const childNode = this.getChildNode();
    if (childNode) {
      this.renderer.removeChild(this.switchParent.nativeElement, childNode);
    }
  }

  private getChildNode() {
    const childEl: HTMLElement = this.switchParent.nativeElement;
    return Array.from(childEl.childNodes).find(
      (item) => item.nodeName === 'LABEL'
    ) as HTMLElement;
  }
}
